<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
  <title>Document</title>
</head>
<body>

  <div class="title">
    snek
  </div>

  <div class="grid-container">
    <div class="grid">
      <div class="row">
        <div class="cell r20 c0"></div>
        <div class="cell r20 c1"></div>
        <div class="cell r20 c2"></div>
        <div class="cell r20 c3"></div>
        <div class="cell r20 c4"></div>
        <div class="cell r20 c5"></div>
        <div class="cell r20 c6"></div>
        <div class="cell r20 c7"></div>
        <div class="cell r20 c8"></div>
        <div class="cell r20 c9"></div>
        <div class="cell r20 c10"></div>
        <div class="cell r20 c11"></div>
        <div class="cell r20 c12"></div>
        <div class="cell r20 c13"></div>
        <div class="cell r20 c14"></div>
        <div class="cell r20 c15"></div>
        <div class="cell r20 c16"></div>
        <div class="cell r20 c17"></div>
        <div class="cell r20 c18"></div>
        <div class="cell r20 c19"></div>
        <div class="cell r20 c20"></div>
      </div>
      <div class="row">
        <div class="cell r19 c0"></div>
        <div class="cell r19 c1"></div>
        <div class="cell r19 c2"></div>
        <div class="cell r19 c3"></div>
        <div class="cell r19 c4"></div>
        <div class="cell r19 c5"></div>
        <div class="cell r19 c6"></div>
        <div class="cell r19 c7"></div>
        <div class="cell r19 c8"></div>
        <div class="cell r19 c9"></div>
        <div class="cell r19 c10"></div>
        <div class="cell r19 c11"></div>
        <div class="cell r19 c12"></div>
        <div class="cell r19 c13"></div>
        <div class="cell r19 c14"></div>
        <div class="cell r19 c15"></div>
        <div class="cell r19 c16"></div>
        <div class="cell r19 c17"></div>
        <div class="cell r19 c18"></div>
        <div class="cell r19 c19"></div>
        <div class="cell r19 c20"></div>
      </div>
      <div class="row">
        <div class="cell r18 c0"></div>
        <div class="cell r18 c1"></div>
        <div class="cell r18 c2"></div>
        <div class="cell r18 c3"></div>
        <div class="cell r18 c4"></div>
        <div class="cell r18 c5"></div>
        <div class="cell r18 c6"></div>
        <div class="cell r18 c7"></div>
        <div class="cell r18 c8"></div>
        <div class="cell r18 c9"></div>
        <div class="cell r18 c10"></div>
        <div class="cell r18 c11"></div>
        <div class="cell r18 c12"></div>
        <div class="cell r18 c13"></div>
        <div class="cell r18 c14"></div>
        <div class="cell r18 c15"></div>
        <div class="cell r18 c16"></div>
        <div class="cell r18 c17"></div>
        <div class="cell r18 c18"></div>
        <div class="cell r18 c19"></div>
        <div class="cell r18 c20"></div>
      </div>
      <div class="row">
        <div class="cell r17 c0"></div>
        <div class="cell r17 c1"></div>
        <div class="cell r17 c2"></div>
        <div class="cell r17 c3"></div>
        <div class="cell r17 c4"></div>
        <div class="cell r17 c5"></div>
        <div class="cell r17 c6"></div>
        <div class="cell r17 c7"></div>
        <div class="cell r17 c8"></div>
        <div class="cell r17 c9"></div>
        <div class="cell r17 c10"></div>
        <div class="cell r17 c11"></div>
        <div class="cell r17 c12"></div>
        <div class="cell r17 c13"></div>
        <div class="cell r17 c14"></div>
        <div class="cell r17 c15"></div>
        <div class="cell r17 c16"></div>
        <div class="cell r17 c17"></div>
        <div class="cell r17 c18"></div>
        <div class="cell r17 c19"></div>
        <div class="cell r17 c20"></div>
      </div>
      <div class="row">
        <div class="cell r16 c0"></div>
        <div class="cell r16 c1"></div>
        <div class="cell r16 c2"></div>
        <div class="cell r16 c3"></div>
        <div class="cell r16 c4"></div>
        <div class="cell r16 c5"></div>
        <div class="cell r16 c6"></div>
        <div class="cell r16 c7"></div>
        <div class="cell r16 c8"></div>
        <div class="cell r16 c9"></div>
        <div class="cell r16 c10"></div>
        <div class="cell r16 c11"></div>
        <div class="cell r16 c12"></div>
        <div class="cell r16 c13"></div>
        <div class="cell r16 c14"></div>
        <div class="cell r16 c15"></div>
        <div class="cell r16 c16"></div>
        <div class="cell r16 c17"></div>
        <div class="cell r16 c18"></div>
        <div class="cell r16 c19"></div>
        <div class="cell r16 c20"></div>
      </div>
      <div class="row">
        <div class="cell r15 c0"></div>
        <div class="cell r15 c1"></div>
        <div class="cell r15 c2"></div>
        <div class="cell r15 c3"></div>
        <div class="cell r15 c4"></div>
        <div class="cell r15 c5"></div>
        <div class="cell r15 c6"></div>
        <div class="cell r15 c7"></div>
        <div class="cell r15 c8"></div>
        <div class="cell r15 c9"></div>
        <div class="cell r15 c10"></div>
        <div class="cell r15 c11"></div>
        <div class="cell r15 c12"></div>
        <div class="cell r15 c13"></div>
        <div class="cell r15 c14"></div>
        <div class="cell r15 c15"></div>
        <div class="cell r15 c16"></div>
        <div class="cell r15 c17"></div>
        <div class="cell r15 c18"></div>
        <div class="cell r15 c19"></div>
        <div class="cell r15 c20"></div>
      </div>
      <div class="row">
        <div class="cell r14 c0"></div>
        <div class="cell r14 c1"></div>
        <div class="cell r14 c2"></div>
        <div class="cell r14 c3"></div>
        <div class="cell r14 c4"></div>
        <div class="cell r14 c5"></div>
        <div class="cell r14 c6"></div>
        <div class="cell r14 c7"></div>
        <div class="cell r14 c8"></div>
        <div class="cell r14 c9"></div>
        <div class="cell r14 c10"></div>
        <div class="cell r14 c11"></div>
        <div class="cell r14 c12"></div>
        <div class="cell r14 c13"></div>
        <div class="cell r14 c14"></div>
        <div class="cell r14 c15"></div>
        <div class="cell r14 c16"></div>
        <div class="cell r14 c17"></div>
        <div class="cell r14 c18"></div>
        <div class="cell r14 c19"></div>
        <div class="cell r14 c20"></div>
      </div>
      <div class="row">
        <div class="cell r13 c0"></div>
        <div class="cell r13 c1"></div>
        <div class="cell r13 c2"></div>
        <div class="cell r13 c3"></div>
        <div class="cell r13 c4"></div>
        <div class="cell r13 c5"></div>
        <div class="cell r13 c6"></div>
        <div class="cell r13 c7"></div>
        <div class="cell r13 c8"></div>
        <div class="cell r13 c9"></div>
        <div class="cell r13 c10"></div>
        <div class="cell r13 c11"></div>
        <div class="cell r13 c12"></div>
        <div class="cell r13 c13"></div>
        <div class="cell r13 c14"></div>
        <div class="cell r13 c15"></div>
        <div class="cell r13 c16"></div>
        <div class="cell r13 c17"></div>
        <div class="cell r13 c18"></div>
        <div class="cell r13 c19"></div>
        <div class="cell r13 c20"></div>
      </div>
      <div class="row">
        <div class="cell r12 c0"></div>
        <div class="cell r12 c1"></div>
        <div class="cell r12 c2"></div>
        <div class="cell r12 c3"></div>
        <div class="cell r12 c4"></div>
        <div class="cell r12 c5"></div>
        <div class="cell r12 c6"></div>
        <div class="cell r12 c7"></div>
        <div class="cell r12 c8"></div>
        <div class="cell r12 c9"></div>
        <div class="cell r12 c10"></div>
        <div class="cell r12 c11"></div>
        <div class="cell r12 c12"></div>
        <div class="cell r12 c13"></div>
        <div class="cell r12 c14"></div>
        <div class="cell r12 c15"></div>
        <div class="cell r12 c16"></div>
        <div class="cell r12 c17"></div>
        <div class="cell r12 c18"></div>
        <div class="cell r12 c19"></div>
        <div class="cell r12 c20"></div>
      </div>
      <div class="row">
        <div class="cell r11 c0"></div>
        <div class="cell r11 c1"></div>
        <div class="cell r11 c2"></div>
        <div class="cell r11 c3"></div>
        <div class="cell r11 c4"></div>
        <div class="cell r11 c5"></div>
        <div class="cell r11 c6"></div>
        <div class="cell r11 c7"></div>
        <div class="cell r11 c8"></div>
        <div class="cell r11 c9"></div>
        <div class="cell r11 c10"></div>
        <div class="cell r11 c11"></div>
        <div class="cell r11 c12"></div>
        <div class="cell r11 c13"></div>
        <div class="cell r11 c14"></div>
        <div class="cell r11 c15"></div>
        <div class="cell r11 c16"></div>
        <div class="cell r11 c17"></div>
        <div class="cell r11 c18"></div>
        <div class="cell r11 c19"></div>
        <div class="cell r11 c20"></div>
      </div>
      <div class="row">
        <div class="cell r10 c0"></div>
        <div class="cell r10 c1"></div>
        <div class="cell r10 c2"></div>
        <div class="cell r10 c3"></div>
        <div class="cell r10 c4"></div>
        <div class="cell r10 c5"></div>
        <div class="cell r10 c6"></div>
        <div class="cell r10 c7"></div>
        <div class="cell r10 c8"></div>
        <div class="cell r10 c9"></div>
        <div class="cell r10 c10"></div>
        <div class="cell r10 c11"></div>
        <div class="cell r10 c12"></div>
        <div class="cell r10 c13"></div>
        <div class="cell r10 c14"></div>
        <div class="cell r10 c15"></div>
        <div class="cell r10 c16"></div>
        <div class="cell r10 c17"></div>
        <div class="cell r10 c18"></div>
        <div class="cell r10 c19"></div>
        <div class="cell r10 c20"></div>
      </div>
      <div class="row">
        <div class="cell r9 c0"></div>
        <div class="cell r9 c1"></div>
        <div class="cell r9 c2"></div>
        <div class="cell r9 c3"></div>
        <div class="cell r9 c4"></div>
        <div class="cell r9 c5"></div>
        <div class="cell r9 c6"></div>
        <div class="cell r9 c7"></div>
        <div class="cell r9 c8"></div>
        <div class="cell r9 c9"></div>
        <div class="cell r9 c10"></div>
        <div class="cell r9 c11"></div>
        <div class="cell r9 c12"></div>
        <div class="cell r9 c13"></div>
        <div class="cell r9 c14"></div>
        <div class="cell r9 c15"></div>
        <div class="cell r9 c16"></div>
        <div class="cell r9 c17"></div>
        <div class="cell r9 c18"></div>
        <div class="cell r9 c19"></div>
        <div class="cell r9 c20"></div>
      </div>
      <div class="row">
        <div class="cell r8 c0"></div>
        <div class="cell r8 c1"></div>
        <div class="cell r8 c2"></div>
        <div class="cell r8 c3"></div>
        <div class="cell r8 c4"></div>
        <div class="cell r8 c5"></div>
        <div class="cell r8 c6"></div>
        <div class="cell r8 c7"></div>
        <div class="cell r8 c8"></div>
        <div class="cell r8 c9"></div>
        <div class="cell r8 c10"></div>
        <div class="cell r8 c11"></div>
        <div class="cell r8 c12"></div>
        <div class="cell r8 c13"></div>
        <div class="cell r8 c14"></div>
        <div class="cell r8 c15"></div>
        <div class="cell r8 c16"></div>
        <div class="cell r8 c17"></div>
        <div class="cell r8 c18"></div>
        <div class="cell r8 c19"></div>
        <div class="cell r8 c20"></div>
      </div>
      <div class="row">
        <div class="cell r7 c0"></div>
        <div class="cell r7 c1"></div>
        <div class="cell r7 c2"></div>
        <div class="cell r7 c3"></div>
        <div class="cell r7 c4"></div>
        <div class="cell r7 c5"></div>
        <div class="cell r7 c6"></div>
        <div class="cell r7 c7"></div>
        <div class="cell r7 c8"></div>
        <div class="cell r7 c9"></div>
        <div class="cell r7 c10"></div>
        <div class="cell r7 c11"></div>
        <div class="cell r7 c12"></div>
        <div class="cell r7 c13"></div>
        <div class="cell r7 c14"></div>
        <div class="cell r7 c15"></div>
        <div class="cell r7 c16"></div>
        <div class="cell r7 c17"></div>
        <div class="cell r7 c18"></div>
        <div class="cell r7 c19"></div>
        <div class="cell r7 c20"></div>
      </div>
      <div class="row">
        <div class="cell r6 c0"></div>
        <div class="cell r6 c1"></div>
        <div class="cell r6 c2"></div>
        <div class="cell r6 c3"></div>
        <div class="cell r6 c4"></div>
        <div class="cell r6 c5"></div>
        <div class="cell r6 c6"></div>
        <div class="cell r6 c7"></div>
        <div class="cell r6 c8"></div>
        <div class="cell r6 c9"></div>
        <div class="cell r6 c10"></div>
        <div class="cell r6 c11"></div>
        <div class="cell r6 c12"></div>
        <div class="cell r6 c13"></div>
        <div class="cell r6 c14"></div>
        <div class="cell r6 c15"></div>
        <div class="cell r6 c16"></div>
        <div class="cell r6 c17"></div>
        <div class="cell r6 c18"></div>
        <div class="cell r6 c19"></div>
        <div class="cell r6 c20"></div>
      </div>
      <div class="row">
        <div class="cell r5 c0"></div>
        <div class="cell r5 c1"></div>
        <div class="cell r5 c2"></div>
        <div class="cell r5 c3"></div>
        <div class="cell r5 c4"></div>
        <div class="cell r5 c5"></div>
        <div class="cell r5 c6"></div>
        <div class="cell r5 c7"></div>
        <div class="cell r5 c8"></div>
        <div class="cell r5 c9"></div>
        <div class="cell r5 c10"></div>
        <div class="cell r5 c11"></div>
        <div class="cell r5 c12"></div>
        <div class="cell r5 c13"></div>
        <div class="cell r5 c14"></div>
        <div class="cell r5 c15"></div>
        <div class="cell r5 c16"></div>
        <div class="cell r5 c17"></div>
        <div class="cell r5 c18"></div>
        <div class="cell r5 c19"></div>
        <div class="cell r5 c20"></div>
      </div>
      <div class="row">
        <div class="cell r4 c0"></div>
        <div class="cell r4 c1"></div>
        <div class="cell r4 c2"></div>
        <div class="cell r4 c3"></div>
        <div class="cell r4 c4"></div>
        <div class="cell r4 c5"></div>
        <div class="cell r4 c6"></div>
        <div class="cell r4 c7"></div>
        <div class="cell r4 c8"></div>
        <div class="cell r4 c9"></div>
        <div class="cell r4 c10"></div>
        <div class="cell r4 c11"></div>
        <div class="cell r4 c12"></div>
        <div class="cell r4 c13"></div>
        <div class="cell r4 c14"></div>
        <div class="cell r4 c15"></div>
        <div class="cell r4 c16"></div>
        <div class="cell r4 c17"></div>
        <div class="cell r4 c18"></div>
        <div class="cell r4 c19"></div>
        <div class="cell r4 c20"></div>
      </div>
      <div class="row">
        <div class="cell r3 c0"></div>
        <div class="cell r3 c1"></div>
        <div class="cell r3 c2"></div>
        <div class="cell r3 c3"></div>
        <div class="cell r3 c4"></div>
        <div class="cell r3 c5"></div>
        <div class="cell r3 c6"></div>
        <div class="cell r3 c7"></div>
        <div class="cell r3 c8"></div>
        <div class="cell r3 c9"></div>
        <div class="cell r3 c10"></div>
        <div class="cell r3 c11"></div>
        <div class="cell r3 c12"></div>
        <div class="cell r3 c13"></div>
        <div class="cell r3 c14"></div>
        <div class="cell r3 c15"></div>
        <div class="cell r3 c16"></div>
        <div class="cell r3 c17"></div>
        <div class="cell r3 c18"></div>
        <div class="cell r3 c19"></div>
        <div class="cell r3 c20"></div>
      </div>
      <div class="row">
        <div class="cell r2 c0"></div>
        <div class="cell r2 c1"></div>
        <div class="cell r2 c2"></div>
        <div class="cell r2 c3"></div>
        <div class="cell r2 c4"></div>
        <div class="cell r2 c5"></div>
        <div class="cell r2 c6"></div>
        <div class="cell r2 c7"></div>
        <div class="cell r2 c8"></div>
        <div class="cell r2 c9"></div>
        <div class="cell r2 c10"></div>
        <div class="cell r2 c11"></div>
        <div class="cell r2 c12"></div>
        <div class="cell r2 c13"></div>
        <div class="cell r2 c14"></div>
        <div class="cell r2 c15"></div>
        <div class="cell r2 c16"></div>
        <div class="cell r2 c17"></div>
        <div class="cell r2 c18"></div>
        <div class="cell r2 c19"></div>
        <div class="cell r2 c20"></div>
      </div>
      <div class="row">
        <div class="cell r1 c0"></div>
        <div class="cell r1 c1"></div>
        <div class="cell r1 c2"></div>
        <div class="cell r1 c3"></div>
        <div class="cell r1 c4"></div>
        <div class="cell r1 c5"></div>
        <div class="cell r1 c6"></div>
        <div class="cell r1 c7"></div>
        <div class="cell r1 c8"></div>
        <div class="cell r1 c9"></div>
        <div class="cell r1 c10"></div>
        <div class="cell r1 c11"></div>
        <div class="cell r1 c12"></div>
        <div class="cell r1 c13"></div>
        <div class="cell r1 c14"></div>
        <div class="cell r1 c15"></div>
        <div class="cell r1 c16"></div>
        <div class="cell r1 c17"></div>
        <div class="cell r1 c18"></div>
        <div class="cell r1 c19"></div>
        <div class="cell r1 c20"></div>
      </div>
      <div class="row">
        <div class="cell r0 c0"></div>
        <div class="cell r0 c1"></div>
        <div class="cell r0 c2"></div>
        <div class="cell r0 c3"></div>
        <div class="cell r0 c4"></div>
        <div class="cell r0 c5"></div>
        <div class="cell r0 c6"></div>
        <div class="cell r0 c7"></div>
        <div class="cell r0 c8"></div>
        <div class="cell r0 c9"></div>
        <div class="cell r0 c10"></div>
        <div class="cell r0 c11"></div>
        <div class="cell r0 c12"></div>
        <div class="cell r0 c13"></div>
        <div class="cell r0 c14"></div>
        <div class="cell r0 c15"></div>
        <div class="cell r0 c16"></div>
        <div class="cell r0 c17"></div>
        <div class="cell r0 c18"></div>
        <div class="cell r0 c19"></div>
        <div class="cell r0 c20"></div>
      </div>
    </div>
  </div>
  <div class="info">
    <div class="score">
    </div>
    <div class="level">
    </div>
  </div>


</body>
<script>

  const scoreDiv = document.querySelector(".score")
  const levelDiv = document.querySelector(".level")

  let x = 10
  let y = 10
  let direction
  let ms = 300
  let length = 10
  let counter = 1
  let score = 0
  scoreDiv.innerHTML = score.toFixed(5)
  levelDiv.innerHTML = `Level ${length - 9}`
  let game

  let fx
  let fy

  let activeCell = document.querySelector(`.c${x}.r${y}`)
  let removeCell

  activeCell.classList.add('active')
  activeCell.classList.add(`x${counter}`)

  function changeDirection(e) {

    if (!game) {
      game = setInterval(move, ms)
    }

    let key = e.keyCode



    if (key == 38 && direction != "Down") {
      direction = "Up"
    } else if (key == 40 && direction != "Up") {
      direction = "Down"
    } else if (key == 37 && direction != "Right") {
      direction = "Left"
    } else if (key == 39 && direction != "Left") {
      direction = "Right"
    } else if (key === "80") {
      clearInterval(game)
      game = undefined
    }
  }

  function move(e) {

    if (direction) {
      counter !== length ? counter += 1 : counter -= length - 1
    }

    if (direction === "Right") {
      x = (x === 20 ? x - 20 : x + 1)
    } else if (direction === "Left") {
      x = (x === 0 ? x + 20 : x - 1)
    } else if (direction === "Up") {
      y = (y === 20 ? y - 20 : y + 1)
    } else if (direction === "Down") {
      y = (y === 0 ? y + 20 : y - 1)
    }

    if (direction) activeCell = document.querySelector(`.c${x}.r${y}`)

    if (activeCell.classList.contains('active')) {
      clearInterval(game)
    } else {
      if (document.querySelector(`.x${counter}`)) {
        removeCell = document.querySelector(`.x${counter}`)
        removeCell.classList.remove('active')
        removeCell.classList.remove(`x${counter}`)
      }
      if (activeCell.classList.contains('snek-snack')) {
        length += 1;
        score += ms * Math.pow(length/10, 5) / 100
        if (ms >= 40) ms -= 20;
        clearInterval(game);
        game = setInterval(move, ms);
        activeCell.classList.remove('snek-snack')
      }
      activeCell.classList.add('active')
      activeCell.classList.add(`x${counter}`)
    }

    scoreDiv.innerHTML = score.toFixed(5)
    levelDiv.innerHTML = `Level ${length - 9}`

    let foodGen = Math.random()

    if (foodGen < 0.1) {
      fx = Math.floor(Math.random() * 20)
      fy = Math.floor(Math.random() * 20)
      let foodCell
      foodCell = document.querySelector(`.c${fx}.r${fy}`)
      if (!foodCell.classList.contains('active')) foodCell.classList.add('snek-snack')
    }

  }

  window.addEventListener('keydown', changeDirection)



</script>
</html>
